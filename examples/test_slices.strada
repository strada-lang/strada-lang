func main() int {
    my int $passed = 0;
    my int $total = 0;

    # Test 1: Basic array slice
    my array @arr = (10, 20, 30, 40, 50);
    my array @slice = @arr[0, 2, 4];
    $total = $total + 1;
    if (scalar(@slice) == 3 && $slice[0] + 0 == 10 && $slice[1] + 0 == 30 && $slice[2] + 0 == 50) {
        $passed = $passed + 1;
    } else {
        say("FAIL test 1: basic array slice");
    }

    # Test 2: Hash slice
    my hash %h = ();
    $h{"a"} = "alpha";
    $h{"b"} = "beta";
    $h{"c"} = "gamma";
    my array @vals = @h{"a", "c"};
    $total = $total + 1;
    if (scalar(@vals) == 2 && $vals[0] eq "alpha" && $vals[1] eq "gamma") {
        $passed = $passed + 1;
    } else {
        say("FAIL test 2: hash slice");
    }

    # Test 3: Array slice with range
    my array @range_slice = @arr[1..3];
    $total = $total + 1;
    if (scalar(@range_slice) == 3 && $range_slice[0] + 0 == 20 && $range_slice[1] + 0 == 30 && $range_slice[2] + 0 == 40) {
        $passed = $passed + 1;
    } else {
        say("FAIL test 3: array slice with range");
    }

    # Test 4: Array ref slice
    my scalar $aref = \@arr;
    my array @ref_slice = @{$aref}[0, 4];
    $total = $total + 1;
    if (scalar(@ref_slice) == 2 && $ref_slice[0] + 0 == 10 && $ref_slice[1] + 0 == 50) {
        $passed = $passed + 1;
    } else {
        say("FAIL test 4: array ref slice");
    }

    # Test 5: Hash ref slice
    my scalar $href = \%h;
    my array @href_slice = @{$href}{"b", "c"};
    $total = $total + 1;
    if (scalar(@href_slice) == 2 && $href_slice[0] eq "beta" && $href_slice[1] eq "gamma") {
        $passed = $passed + 1;
    } else {
        say("FAIL test 5: hash ref slice");
    }

    # Test 6: Destructuring from hash slice
    my (scalar $x, scalar $y) = @h{"a", "b"};
    $total = $total + 1;
    if ($x eq "alpha" && $y eq "beta") {
        $passed = $passed + 1;
    } else {
        say("FAIL test 6: destructuring from hash slice");
    }

    # Test 7: Array slice with variable indices
    my int $idx1 = 1;
    my int $idx2 = 3;
    my array @var_slice = @arr[$idx1, $idx2];
    $total = $total + 1;
    if (scalar(@var_slice) == 2 && $var_slice[0] + 0 == 20 && $var_slice[1] + 0 == 40) {
        $passed = $passed + 1;
    } else {
        say("FAIL test 7: variable index slice");
    }

    # Test 8: Hash slice with variable keys
    my str $k1 = "a";
    my str $k2 = "c";
    my array @vk_slice = @h{$k1, $k2};
    $total = $total + 1;
    if (scalar(@vk_slice) == 2 && $vk_slice[0] eq "alpha" && $vk_slice[1] eq "gamma") {
        $passed = $passed + 1;
    } else {
        say("FAIL test 8: variable key hash slice");
    }

    # Test 9: Single element array slice
    my array @single = @arr[2];
    $total = $total + 1;
    if (scalar(@single) == 1 && $single[0] + 0 == 30) {
        $passed = $passed + 1;
    } else {
        say("FAIL test 9: single element array slice");
    }

    # Test 10: Single element hash slice
    my array @hsingle = @h{"b"};
    $total = $total + 1;
    if (scalar(@hsingle) == 1 && $hsingle[0] eq "beta") {
        $passed = $passed + 1;
    } else {
        say("FAIL test 10: single element hash slice");
    }

    say("Passed " . $passed . "/" . $total . " slice tests");
    if ($passed == $total) {
        say("All slice tests passed");
    }
    return 0;
}
